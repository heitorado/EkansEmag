<!DOCTYPE html>
<html>
  <head>
    <title>
      Ekans Emag
    </title>
  </head>
  <body>
    <canvas id="gc" width="700" height="700"></canvas>
    <p id="score">SCORE: 0</p>
    <script>
      window.onload=function(){
        scoreDisplay = document.getElementById("score");
        canv=document.getElementById("gc");
        ctx=canv.getContext("2d");
        // Adiciona listener para saber quando apertamos uma tecla
        document.addEventListener("keydown", keyPush);

        // Configura a periodicidade em que a função 'game' será chamada
        setInterval(game,1000/15);
      }

      // Tamanho padrao dos quadrados
      tileSize = 20;

      //variavel para guardar a pontuação
      score = 0;

      //posição inicial x e y da cabeça
      headX = 340;
      headY = 340;

      //posição inicial x e y da comida
      comidaX = Math.floor(Math.random()*35)*tileSize;
      comidaY = Math.floor(Math.random()*35)*tileSize;

      //direção atual do personagem, em 0 para o jogo só começar ao apertar uma tecla
      up = 0;
      down = 0;
      left = 0;
      right = 0;

      

      function game() {
        // Colore o fundo com a cor preta
        ctx.fillStyle="black";
	      ctx.fillRect(0,0, canv.width, canv.height);
        
        // Printa a cabeça
        ctx.fillStyle="green";
	      ctx.fillRect(headX, headY, tileSize, tileSize);

        // Printa a comida
        ctx.fillStyle="red";
	      ctx.fillRect(comidaX, comidaY, tileSize, tileSize);

        // Move a cabeça constantemente de acordo com a direção
        if(up){
          headY-= tileSize;
        }
        if(down){
          headY+= tileSize;
        }
        if(left){
          headX-= tileSize;
        }
        if(right){
          headX+= tileSize;
        }
        

        // verifica se comeu a comida 
        if(headX == comidaX && headY == comidaY)
        {
          // Incrementa score atualiza o HTML do Score
          score += 5;
          scoreDisplay.innerHTML = "SCORE: " + score;

          // Muda a comida de lugar
          comidaX = Math.floor(Math.random()*35)*tileSize;
          comidaY = Math.floor(Math.random()*35)*tileSize;

        }
        

      }
      function keyPush(evt) {
        switch(evt.keyCode) {
          case 37:
            left = 1;
            right = 0;
            up = 0;
            down = 0;
            break;
          case 38:
            left = 0;
            right = 0;
            up = 1;
            down = 0;
            break;
          case 39:
            left = 0;
            right = 1;
            up = 0;
            down = 0;
            break;
          case 40:
            left = 0;
            right = 0;
            up = 0;
            down = 1;
            break;
        }
      }
    </script>
  </body>
</html>